gRPC 的重试策略有两种分别是 `重试(retryPolicy)`和`对冲(hedging)`，一个RPC方法只能配置一种重试策略。

**对冲是指在不等待响应的情况主动发送单次调用的多个请求**，如果一个方法使用对冲策略，那么首先会像正常的 RPC 调用一样发送第一次请求，如果 hedgingDelay 时间内没有响应，那么直接发送第二次请求，以此类推，直到发送了 maxAttempts 次。



> 对冲在超过指定时间没有响应就会直接发起请求，而重试则必须要服务端响应后才会发起请求





注意： **使用对冲的时候，请求可能会访问到不同的后端(如果设置了负载均衡)，那么就要求方法在多次执行下是安全，并且符合预期的**



gRPC 中内置了 retry 功能，使用比较简单。

- 1）客户端建立连接时通过`grpc.WithDefaultServiceConfig(retryPolicy)`指定重试策略
- 2）环境变量中开启重试:`export GRPC_GO_RETRY=on`