![image-20220319103547380](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319103547380.png)



![image-20220319103736454](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319103736454.png)





![image-20220319103748972](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319103748972.png)





![image-20220319105247544](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319105247544.png)



一定要处理rows error

![image-20220319110652383](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319110652383.png)



![image-20220319110830230](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319110830230.png)



![image-20220319113355285](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319113355285.png)



![image-20220319114923275](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319114923275.png)



![image-20220319115115501](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319115115501.png)



1. update 只提供一个接口，所有的对象。

![image-20220319115829986](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319115829986.png)

fieldMask 的作用



https://pkg.go.dev/expvar





![image-20220319124404508](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319124404508.png)



为的是让 yaml json toml 序列化到内存方便



![image-20220319124455069](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319124455069.png)



![image-20220319124514204](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319124514204.png)



其他函数可以写很多构造方法。



![image-20220319124641187](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319124641187.png)



![image-20220319124749306](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319124749306.png)



![image-20220319124804390](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319124804390.png)



参数 是 value  不是指针会进行值拷贝。

![image-20220319124852247](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319124852247.png)



![image-20220319125113723](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319125113723.png)



https://commandcenter.blogspot.com/2014/01/self-referential-functions-and-design.html



https://dave.cheney.net/2014/10/17/functional-options-for-friendly-apis



![image-20220319125550615](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319125550615.png)



![image-20220319125903124](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319125903124.png)



![image-20220319125920243](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319125920243.png)



![image-20220319130121612](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319130121612.png)



![image-20220319130308394](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319130308394.png)



The-site-reliability-network



![image-20220319130548192](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319130548192.png)



![image-20220319130627692](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319130627692.png)



![image-20220319130805234](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319130805234.png)



![image-20220319131155418](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319131155418.png)



pb 定义可以加注解，做验证



![image-20220319131425460](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319131425460.png)



![image-20220319131811734](/Users/kestrel/developer/nrookie.github.io/collections/go/xunlianying/工程化/image-20220319131811734.png)



类似于go proxy



https://github.com/gomods/athens



网络错误。

``` golang
go sum - off
```



用开源的代码需要审核，避免发生危险。

